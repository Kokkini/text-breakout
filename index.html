<!doctype html>
<html lang="en">
  <head>
    <!--
      URL Parameters Support:
      You can configure the animation via URL parameters:
      - viewer: Set to 'true' for viewer mode (hides controls initially, auto-starts animation)
      - balls (or ballCount, numBalls): Number of balls (1-50)
      - deviation (or deviationAngle, angle): Deviation angle in degrees (1-45)
      - speed (or movementSpeed): Movement speed multiplier (0.1-5.0)
      - fontSize (or textResolution, resolution): Text resolution (8-120)
      - text: The text to display (URL encoded)
      
      Viewer mode example: ?viewer=true&balls=30&deviation=20&speed=1.5&fontSize=40&text=Hello
      Editor mode example: ?viewer=false&balls=30&deviation=20&speed=1.5&fontSize=40&text=Hello
      
      Note: In viewer mode, clicking "Create your own" reveals controls without reloading the page.
    -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-80BW084NES"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-80BW084NES');
    </script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Text Breakout - Ball Create Text Animation</title>
    <link rel="stylesheet" href="./styles/main.css" />
    <style>
      @font-face {
        font-family: 'Eutopia';
        src: url('./assets/Eutopia/Eutopia.otf') format('opentype');
        font-weight: normal;
        font-style: normal;
        font-display: block; /* Ensure font loads before rendering */
      }
      
      /* Test if font is loaded */
      .font-loaded {
        font-family: 'Eutopia', Arial, sans-serif;
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  </head>
  <body>
    <main class="container">
      <h1>Text Breakout</h1>
      <p class="subtitle">Watch balls carve out your text!</p>
      
      <form id="text-form" aria-describedby="status" onsubmit="return false;">
        <label for="text-input">Enter text to carve (can be multiple lines):</label>
        <textarea id="text-input" name="text" rows="3" cols="50" maxlength="200" placeholder="Enter your text here...&#10;You can use multiple lines!"></textarea>
        
        <div class="animation-controls">
          <div class="control-group">
            <label for="font-size">Text resolution:</label>
            <input type="range" id="font-size" min="8" max="120" value="20" />
            <span id="font-size-value">20</span>
          </div>
          <div class="control-group">
            <label for="ball-count">Ball Count:</label>
            <input type="range" id="ball-count" min="1" max="50" value="20" />
            <span id="ball-count-value">30</span>
          </div>
          
          <div class="control-group">
            <label for="deviation-angle">Deviation Angle:</label>
            <input type="range" id="deviation-angle" min="1" max="45" value="20" />
            <span id="deviation-angle-value">15Â°</span>
          </div>
          
          <div class="control-group">
            <label for="movement-speed">Movement Speed:</label>
            <input type="range" id="movement-speed" min="0.1" max="5.0" step="0.1" value="1.0" />
            <span id="movement-speed-value">1.0x</span>
          </div>
        </div>
        
        <div class="actions">
          <button id="start-new-btn" type="button">Start New</button>
          <button id="share-config-btn" type="button" title="Copy a shareable URL with current settings">Share your creation</button>
        </div>
      </form>

      <p id="status" role="status" aria-live="polite" class="visually-hidden"></p>

      <section aria-label="Output" class="output">
        <div id="animation-container" class="animation-container">
          <!-- p5.js canvas will be inserted here -->
        </div>
        
        <!-- Debug: Font test area -->
        <!-- <div class="debug-section">
          <h3>Font Debug (Eutopia Test)</h3>
          <div id="font-test" style="font-family: 'Eutopia', Arial, sans-serif; font-size: 24px; border: 1px solid #ccc; padding: 10px; margin: 10px 0;">
            This text should be in Eutopia font: Hello World 123
          </div>
          <div id="font-fallback" style="font-family: Arial, sans-serif; font-size: 24px; border: 1px solid #ccc; padding: 10px; margin: 10px 0;">
            This text is in Arial (fallback): Hello World 123
          </div>
        </div> -->
      </section>
    </main>

    <!-- Core JavaScript modules -->
    <script src="./src/js/data-models.js"></script>
    <script src="./src/js/error-handling.js"></script>
    <script src="./src/js/text-to-image.js"></script>
    <script src="./src/js/grid-system.js"></script>
    <script src="./src/js/ball-animation.js"></script>
    <script src="./src/js/ray-casting.js"></script>
    <script src="./src/js/ui-controls.js"></script>
    <script src="./src/js/event-system.js"></script>
    <script src="./src/js/performance.js"></script>
    <script src="./src/js/validation.js"></script>
    <script src="./src/js/main.js"></script>
    <script src="./scripts/app.js"></script>
  </body>
  </html>


